<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>PX4开发之旅 | Aya</title><meta name="keywords" content="px4,ros2"><meta name="author" content="Aya"><meta name="copyright" content="Aya"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="PX4开发之旅"><meta name="application-name" content="PX4开发之旅"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="PX4开发之旅"><meta property="og:url" content="http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/index.html"><meta property="og:site_name" content="Aya"><meta property="og:description" content="PX4 上位机开发PX4 开发文档 安装 conda 看查内核版本 1cat &amp;#x2F;proc&amp;#x2F;version  诺为 arrch64： 1Linux version 6.1.43-rockchip-rk3588 (root@yml-virtual-machine) (aarch64-none-linux"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://ayasowen.github.io/img/px4.png"><meta property="article:author" content="Aya"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://ayasowen.github.io/img/px4.png"><meta name="description" content="PX4 上位机开发PX4 开发文档 安装 conda 看查内核版本 1cat &amp;#x2F;proc&amp;#x2F;version  诺为 arrch64： 1Linux version 6.1.43-rockchip-rk3588 (root@yml-virtual-machine) (aarch64-none-linux"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 阿米诺斯!","backTitle":"w(ﾟДﾟ)w 卧槽，冰！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码爱好者","🔍 分享与热心","😭 设备摧毁者","🧱 团队点子王"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Aya","link":"链接: ","source":"来源: Aya","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Aya',
  title: 'PX4开发之旅',
  postAI: '',
  pageFillDescription: 'PX4 上位机开发, 安装 conda, 创建环境并启动环境, 安装 OpenCv, git 配置, 科学上网, 安装 ros2, 安装 mavros2 功能包, 安装 t265 功能包, 安装 Offboard 功能包, 安装 rplidar 功能包, SLAM 建图（T265 D435 激光雷达）, 安装 nav2 功能包, 安装 imu_tools, 安装 slam_toolbox, 安装 rtabmap 功能包上位机开发开发文档安装看查内核版本诺为安装相应的版本的下载完后再安装执行回车同意继续往下安装直到出现询问输入询问是否初始化创建环境并启动环境激活环境修改镜像源将里面的内容替换为清华源重新更新镜像源创建环境修改配置默认不进入环境在文件末尾添加激活环境安装配置关联账号邮箱中填写你的账号用户名中填写你注册的邮箱生成密钥用查看密钥前往官网添加密钥科学上网学校校园网很容易出现网络问题需要在板载上跑自己电脑的梯子自己电脑的自己梯子开的端口号默认是记得将自己的梯子的允许局域网打开没有梯子的话可以去搞个精灵学院的还是的流量梯子比按月计费的好足够用好几年了安装请参考于上部署安装功能包记得提前将环境切换至环境创建工作空间安装相关依赖相关安装时会出现版本报错无视即可相关安装功能包失败的话则无视下载很慢没有进度条耐心等待重新打开终端后编译将替换为的头文件为而不是修改文件权限为板载目录编译如果编译过程中出些需要解决后删除对应的编译文件再重新编译如编译过程中出现分别删除工作空间下的里对应的编译文件安装功能包添加密钥添加第三方源安装依赖下载功能包从中已经明确说明版本不再支持最后一个支持的版本为而期间的几个版本虽然支持但官方说明不在对其进行测试克隆依赖包克隆转换飞控的坐标的包自己三次开发的功能包可能有误克隆的工具包无法下载的话可以先在上下载再解压进板载中的工作空间内编译修改文件权限编译激活环境自启动环境可选在最下方添加为板载目录安装功能包爱来自不在组内的找老登拉你进组否则无法克隆代码和进入工作空间克隆功能包将修改为自己所创建的环境路径编译激活环境如果安装了多个工作环境的话请使用以免发生工作空间冲突安装功能包进入工作空间克隆功能包编译编译过程会报错无视即可激活环境建图激光雷达安装功能包安装依赖进入工作空间如果已经安装过的话安装安装安装功能包进入工作空间克隆功能包注意如果遇到以下错误请执行以下操作下载版本在其中黏贴以下内容我是分割线我是分割线测试重新进行依赖安装',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-14 20:42:34',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/ayaa.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Aya</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12894421871&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HAL/" style="font-size: 1.05rem;">HAL<sup>2</sup></a><a href="/tags/acfly/" style="font-size: 1.05rem;">acfly<sup>2</sup></a><a href="/tags/jetson/" style="font-size: 1.05rem;">jetson<sup>1</sup></a><a href="/tags/orangepi/" style="font-size: 1.05rem;">orangepi<sup>1</sup></a><a href="/tags/px4/" style="font-size: 1.05rem;">px4<sup>3</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>1</sup></a><a href="/tags/ros/" style="font-size: 1.05rem;">ros<sup>5</sup></a><a href="/tags/ros2/" style="font-size: 1.05rem;">ros2<sup>3</sup></a><a href="/tags/stm32/" style="font-size: 1.05rem;">stm32<sup>2</sup></a><a href="/tags/uart/" style="font-size: 1.05rem;">uart<sup>1</sup></a><a href="/tags/%E4%BB%BF%E7%9C%9F/" style="font-size: 1.05rem;">仿真<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/" itemprop="url">项目</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/px4/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>px4</span></a><a class="article-meta__tags" href="/tags/ros2/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ros2</span></a></span></div></div><h1 class="post-title" itemprop="name headline">PX4开发之旅</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-11-27T06:48:04.000Z" title="发表于 2024-11-27 14:48:04">2024-11-27</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-07-14T12:42:34.986Z" title="更新于 2025-07-14 20:42:34">2025-07-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为福建"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>福建</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/px4.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/"><header><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/" itemprop="url">项目</a><a href="/tags/px4/" tabindex="-1" itemprop="url">px4</a><a href="/tags/ros2/" tabindex="-1" itemprop="url">ros2</a><h1 id="CrawlerTitle" itemprop="name headline">PX4开发之旅</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Aya</span><time itemprop="dateCreated datePublished" datetime="2024-11-27T06:48:04.000Z" title="发表于 2024-11-27 14:48:04">2024-11-27</time><time itemprop="dateCreated datePublished" datetime="2025-07-14T12:42:34.986Z" title="更新于 2025-07-14 20:42:34">2025-07-14</time></header><h1 id="PX4-上位机开发"><a href="#PX4-上位机开发" class="headerlink" title="PX4 上位机开发"></a>PX4 上位机开发</h1><p><a target="_blank" rel="noopener" href="https://docs.px4.io/main/zh/"><strong>PX4 开发文档</strong></a></p>
<h2 id="安装-conda"><a href="#安装-conda" class="headerlink" title="安装 conda"></a>安装 conda</h2><ul>
<li><p>看查内核版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/version</span><br></pre></td></tr></table></figure>

<p>诺为 <strong>arrch64</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux version 6.1.43-rockchip-rk3588 (root@yml-virtual-machine) (aarch64-none-linux-gnu-gcc (GNU Toolchain <span class="keyword">for</span> the Arm Architecture 11.2-2022.02 (arm-11.14)) 11.2.1 20220111, GNU ld (GNU Toolchain <span class="keyword">for</span> the Arm Architecture 11.2-2022.02 (arm-11.14)) 2.37.20220122) <span class="comment">#1.0.10 SMP Mon Jun 24 10:36:36 CST 2024</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装相应的 <strong>arrch64</strong> 版本的 conda：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2024.10-1-Linux-aarch64.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载完后再安装</span></span><br><span class="line">sh Anaconda3-2024.10-1-Linux-aarch64.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行 <strong>Enter</strong>（回车）同意继续往下安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Anaconda3 2024.10-1</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">continue</span> the installation process, please review the license</span><br><span class="line">agreement.</span><br><span class="line">Please, press ENTER to <span class="built_in">continue</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>直到出现询问 <strong>[yes|no]</strong> 输入 <strong>yes</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Version 4.0 | Last Modified: March 31, 2024 | ANACONDA TOS</span><br><span class="line"></span><br><span class="line">Do you accept the license terms? [<span class="built_in">yes</span>|no]</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">yes</span></span><br></pre></td></tr></table></figure>

<p>询问是否初始化：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Do you wish to update your shell profile to automatically initialize conda?</span><br><span class="line">This will activate conda on startup and change the <span class="built_in">command</span> prompt when activated.</span><br><span class="line">If you<span class="string">&#x27;d prefer that conda&#x27;</span>s base environment not be activated on startup,</span><br><span class="line">   run the following <span class="built_in">command</span> when conda is activated:</span><br><span class="line"></span><br><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">You can undo this by running `conda init --reverse <span class="variable">$SHELL</span>`? [<span class="built_in">yes</span>|no]</span><br><span class="line">[no] &gt;&gt;&gt; <span class="built_in">yes</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="创建环境并启动环境"><a href="#创建环境并启动环境" class="headerlink" title="创建环境并启动环境"></a>创建环境并启动环境</h3><ul>
<li><p>激活 conda 环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改镜像源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/anaconda3</span><br><span class="line">vim .condarc</span><br></pre></td></tr></table></figure>
</li>
<li><p>将里面的内容替换为清华源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">- defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新更新镜像源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda update conda</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 px4 环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n px4 python=3.8</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 conda 配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span>	<span class="comment"># 默认不进入base环境</span></span><br><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li><p>在文件末尾添加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate px4</span><br></pre></td></tr></table></figure>
</li>
<li><p>激活环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="安装-OpenCv"><a href="#安装-OpenCv" class="headerlink" title="安装 OpenCv"></a>安装 OpenCv</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install numpy==1.24.1 -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install opencv-python -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br></pre></td></tr></table></figure>

<h2 id="git-配置"><a href="#git-配置" class="headerlink" title="git 配置"></a>git 配置</h2><ul>
<li><p>关联 github 账号邮箱</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;Your github username&quot;</span></span><br><span class="line"><span class="comment"># &quot;Your github Name&quot; 中填写你的github账号用户名</span></span><br><span class="line">git config --global user.email <span class="string">&quot;yourgitemail@yourdomain.com&quot;</span></span><br><span class="line"><span class="comment"># &quot;yourgitemail@yourdomain.com&quot; 中填写你github注册的邮箱</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;username@email.com&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用 cat 查看密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></table></figure>

<p>前往 github 官网添加密钥</p>
</li>
</ul>
<h3 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h3><ul>
<li><p>学校校园网 git clone 很容易出现网络问题，需要在板载上跑自己电脑的梯子。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自己电脑的ip:自己梯子开的端口号，默认是7890</span></span><br><span class="line">git config --global http.proxy http://192.168.1.XXX:7890</span><br><span class="line">git config --global https.proxy https://192.168.1.XXX:7890</span><br><span class="line"><span class="comment"># 记得将自己的梯子的允许局域网打开</span></span><br><span class="line"><span class="comment"># 没有梯子的话可以去搞个精灵学院的 60R 还是 68R 的 400G 流量梯子, 比按月计费的好</span></span><br><span class="line"><span class="comment"># 400G 足够用好几年了</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="安装-ros2"><a href="#安装-ros2" class="headerlink" title="安装 ros2"></a>安装 ros2</h2><p>请参考 <a href="https://ayasowen.github.io/2024/11/27/%E4%BA%8E-orangepi5-plus-%E4%B8%8A%E9%83%A8%E7%BD%B2-ros2/">于 orangepi5 plus 上部署 ros2</a></p>
<h3 id="安装-mavros2-功能包"><a href="#安装-mavros2-功能包" class="headerlink" title="安装 mavros2 功能包"></a>安装 mavros2 功能包</h3><p><strong>记得提前将 python 环境切换至 px4 环境</strong></p>
<ul>
<li><p>创建工作空间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/px4_ws/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装相关依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python 相关</span></span><br><span class="line">pip3 install empy==3.3.4 -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install pytest -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install pytext-nlp -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install pyyaml -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install lark -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install catkin_pkg -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install -U pip setuptools -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">pip3 install --user lxml -i https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 pytext-nlp 时会出现 numpy 版本报错 无视即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ros2 相关</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libmavlink-dev libmavconn-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-ament-cmake</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y python3-vcstool python3-rosinstall-generator python3-osrf-pycommon</span><br><span class="line"><span class="built_in">sudo</span> apt-get install geographiclib-tools</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-geographic-msgs</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-libmavconn</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-geographic-*</span><br><span class="line"><span class="built_in">sudo</span> apt-get install geographiclib-*</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgeographic-*</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-eigen-stl-containers</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-diagnostic-updater</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-xacro -y</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-octomap*</span><br><span class="line"><span class="built_in">sudo</span> apt-get install python3-rosdep python3-rosinstall python3-rosinstall-generator python3-wstool build-essential</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y libxml2-dev libxslt-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 <strong>MAVROS2</strong> 功能包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/px4_ws</span><br><span class="line"></span><br><span class="line">rosinstall_generator --format repos mavlink | <span class="built_in">tee</span> /tmp/mavlink.repos</span><br><span class="line">rosinstall_generator --format repos --upstream mavros | <span class="built_in">tee</span> -a /tmp/mavros.repos</span><br><span class="line">vcs import src &lt; /tmp/mavlink.repos</span><br><span class="line"></span><br><span class="line">rosdep update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 失败的话则无视</span></span><br><span class="line">rosdep install --from-paths src --ignore-src -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> -b 2.7.0 git@github.com:mavlink/mavros.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src/mavros/mavros/scripts/</span><br><span class="line"></span><br><span class="line"><span class="comment"># install_geographiclib_datasets.sh 下载很慢, 没有进度条, 耐心等待</span></span><br><span class="line"><span class="built_in">sudo</span> ./install_geographiclib_datasets.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新打开终端后编译</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将  #include&quot;tf2_eigen.hpp&quot; 替换为 tf2_eigen.h</span></span><br><span class="line"><span class="comment"># ROS2 foxy 的 tf2_eigen 头文件为 .h 而不是 .hpp</span></span><br><span class="line"></span><br><span class="line">find ./src/mavros/ -<span class="built_in">type</span> f -<span class="built_in">exec</span> sed -i <span class="string">&#x27;s/tf2_eigen\.hpp/tf2_eigen\.h/g&#x27;</span> &#123;&#125; +</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件权限</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -R 777 /home/orangepi/px4_ws</span><br><span class="line"><span class="comment"># /home/orangepi/ 为板载目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure>

<p><strong>如果编译过程中出些 Waring , 需要解决后删除对应的编译文件, 再重新编译</strong></p>
<p>如：<strong>mavros</strong> 编译过程中出现 <strong>Waring</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分别删除工作空间下的 build , install 里对应的编译文件</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line"><span class="built_in">rm</span> -rf ./build/mavros*</span><br><span class="line"><span class="built_in">rm</span> -rf ./install/mavros*</span><br><span class="line"></span><br><span class="line">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="安装-t265-功能包"><a href="#安装-t265-功能包" class="headerlink" title="安装 t265 功能包"></a>安装 t265 功能包</h3><ul>
<li><p>添加密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || <span class="built_in">sudo</span> apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加第三方源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> add-apt-repository <span class="string">&quot;deb https://librealsense.intel.com/Debian/apt-repo <span class="subst">$(lsb_release -cs)</span> main&quot;</span> -u</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install librealsense2-utils -y</span><br><span class="line"><span class="built_in">sudo</span> apt-get install librealsense2-dev -y</span><br><span class="line"><span class="built_in">sudo</span> apt install librealsense2-udev-rules -y</span><br><span class="line"><span class="built_in">sudo</span> apt-get install git libssl-dev libusb-1.0-0-dev pkg-config</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgtk-3-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libglfw3-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-pcl*</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载 <strong>t265</strong> 功能包</p>
<p>从 <strong>Intel® RealSense™ SDK 2.0 (v2.54.1)</strong> 中已经明确说明版本不再支持 T265 最后一个支持的版本为 <a target="_blank" rel="noopener" href="https://github.com/IntelRealSense/librealsense/releases/tag/v2.50.0"><strong>v2.50.0</strong></a> ，而期间的几个版本虽然支持 T265 但官方说明不在对其进行测试。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆 t265 依赖包</span></span><br><span class="line">git <span class="built_in">clone</span> -b 4.0.4 https://github.com/IntelRealSense/realsense-ros.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆 t265 转换飞控的坐标的包</span></span><br><span class="line"><span class="comment"># 自己三次开发的功能包 可能有误</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/AyasOwen/ros2_foxy_vision_to_mavros.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆 t265 的工具包</span></span><br><span class="line">git <span class="built_in">clone</span> -b v2.50.0 https://github.com/IntelRealSense/librealsense.git</span><br><span class="line"><span class="comment"># 无法下载的话可以先在 PC 上下载 .zip 再解压进板载中的工作空间内</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 修改文件权限</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -R 777 /home/orangepi/px4_ws</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line">colcon build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line"><span class="built_in">source</span> ~/px4_ws/install/setup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自启动环境（可选）</span></span><br><span class="line"><span class="built_in">sudo</span> vim ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在最下方添加</span></span><br><span class="line"><span class="built_in">source</span> /home/orangepi/px4_ws/install/setup.sh</span><br><span class="line"><span class="comment"># /home/orangepi/ 为板载目录</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="安装-Offboard-功能包"><a href="#安装-Offboard-功能包" class="headerlink" title="安装 Offboard 功能包"></a>安装 Offboard 功能包</h3><p>爱来自 BoomBoomFLY <strong>(By Aya)</strong></p>
<p>不在组内的找老登拉你进组，否则无法克隆代码(offboard 和 vision_to_mavros)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入工作空间</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆 Offboard 功能包</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:BoomBoomFly/px4_ros2_foxy_offboard.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ./offboard/</span><br><span class="line"></span><br><span class="line">vim ./setup.cfg</span><br><span class="line"></span><br><span class="line">将 \[build_script\] 修改为自己所创建的 conda 环境路径</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"><span class="comment"># colcon build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line"><span class="built_in">source</span> ./install/setup.sh</span><br><span class="line"><span class="comment"># 如果安装了多个工作环境的话请使用 source ./install/local_setup.sh</span></span><br><span class="line"><span class="comment"># 以免发生工作空间冲突</span></span><br></pre></td></tr></table></figure>

<h3 id="安装-rplidar-功能包"><a href="#安装-rplidar-功能包" class="headerlink" title="安装 rplidar 功能包"></a>安装 rplidar 功能包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入工作空间</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆 rplidar 功能包</span></span><br><span class="line">git <span class="built_in">clone</span> -b ros2 https://github.com/Slamtec/rplidar_ros.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line"><span class="comment"># 编译过程会报错，无视即可</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line"><span class="built_in">source</span> ./install/setup.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src/rplidar_ros</span><br><span class="line"><span class="built_in">source</span> scripts/create_udev_rules.sh</span><br></pre></td></tr></table></figure>

<h3 id="SLAM-建图（T265-D435-激光雷达）"><a href="#SLAM-建图（T265-D435-激光雷达）" class="headerlink" title="SLAM 建图（T265 D435 激光雷达）"></a>SLAM 建图（T265 D435 激光雷达）</h3><h4 id="安装-nav2-功能包"><a href="#安装-nav2-功能包" class="headerlink" title="安装 nav2 功能包"></a>安装 nav2 功能包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-libnabo ros-foxy-libpointmatcher ros-foxy-octomap</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgoogle-glog-dev libgflags-dev libatlas-base-dev libsuitesparse-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-foxy-pcl-msgs ros-foxy-image-geometry ros-foxy-tf2-sensor-msgs ros-foxy-depth-image-proc</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libeigen3-dev libboost-all-dev libyaml-cpp-dev libvtk6-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libpcap-dev libpng-dev libusb-1.0-0-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入工作空间</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> -b foxy-devel https://github.com/ros-navigation/navigation2.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ros-planning/navigation_msgs.git -b foxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果已经安装过 map_msgs 的话</span></span><br><span class="line"><span class="built_in">cd</span> ./navigation_msgs/</span><br><span class="line"><span class="built_in">rm</span> -rf ./map_msgs</span><br></pre></td></tr></table></figure>

<h4 id="安装-imu-tools"><a href="#安装-imu-tools" class="headerlink" title="安装 imu_tools"></a>安装 imu_tools</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b foxy https://github.com/ccny-ros-pkg/imu_tools.git</span><br></pre></td></tr></table></figure>

<h4 id="安装-slam-toolbox"><a href="#安装-slam-toolbox" class="headerlink" title="安装 slam_toolbox"></a>安装 slam_toolbox</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b foxy-devel https://github.com/SteveMacenski/slam_toolbox.git</span><br></pre></td></tr></table></figure>

<h4 id="安装-rtabmap-功能包"><a href="#安装-rtabmap-功能包" class="headerlink" title="安装 rtabmap 功能包"></a>安装 rtabmap 功能包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入工作空间</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment">#克隆 rtabmap 功能包</span></span><br><span class="line">git <span class="built_in">clone</span> -b foxy-devel https://github.com/introlab/rtabmap.git</span><br><span class="line">git <span class="built_in">clone</span> -b foxy-devel https://github.com/introlab/rtabmap_ros.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws/</span><br><span class="line"></span><br><span class="line">rosdepc update &amp;&amp; rosdepc install --from-paths src --ignore-src -r -y</span><br><span class="line">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>如果遇到以下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from pkg_resources import load_entry_point</span><br><span class="line">ERROR: the following packages/stacks could not have their rosdep keys resolved</span><br><span class="line">to system dependencies:</span><br><span class="line">smac_planner: Cannot locate rosdep definition <span class="keyword">for</span> [ompl]</span><br><span class="line">rtabmap_examples: Cannot locate rosdep definition <span class="keyword">for</span> [velodyne]</span><br><span class="line">rtabmap_demos: Cannot locate rosdep definition <span class="keyword">for</span> [turtlebot3]</span><br><span class="line">nav2_util: Cannot locate rosdep definition <span class="keyword">for</span> [test_msgs]</span><br><span class="line">offboard: Cannot locate rosdep definition <span class="keyword">for</span> [ament_python]</span><br><span class="line">nav2_bringup: Cannot locate rosdep definition <span class="keyword">for</span> [slam_toolbox]</span><br><span class="line">nav2_system_tests: Cannot locate rosdep definition <span class="keyword">for</span> [gazebo_ros_pkgs]</span><br><span class="line">rtabmap_rviz_plugins: Cannot locate rosdep definition <span class="keyword">for</span> [pcl_conversions]</span><br><span class="line">rtabmap_util: Cannot locate rosdep definition <span class="keyword">for</span> [pcl_ros]</span><br><span class="line">rtabmap: Cannot locate rosdep definition <span class="keyword">for</span> [libpointmatcher]</span><br><span class="line">rtabmap_conversions: Cannot locate rosdep definition <span class="keyword">for</span> [pcl_conversions]</span><br><span class="line">rtabmap_odom: Cannot locate rosdep definition <span class="keyword">for</span> [pcl_ros]</span><br><span class="line">librealsense2: Cannot locate rosdep definition <span class="keyword">for</span> [catkin]</span><br><span class="line">nav2_behavior_tree: Cannot locate rosdep definition <span class="keyword">for</span> [behaviortree_cpp_v3]</span><br><span class="line">nav2_bt_navigator: Cannot locate rosdep definition <span class="keyword">for</span> [behaviortree_cpp_v3]</span><br><span class="line">offboard_cpp: Cannot locate rosdep definition <span class="keyword">for</span> [opencv]</span><br><span class="line">Continuing to install resolvable dependencies...</span><br><span class="line">executing <span class="built_in">command</span> [<span class="built_in">sudo</span> -H apt-get install -y libceres-dev]</span><br></pre></td></tr></table></figure>

<p>请执行以下操作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> depend &amp;&amp; <span class="built_in">cd</span> depend</span><br><span class="line"><span class="comment"># 下载ceres2.0版本</span></span><br><span class="line">git <span class="built_in">clone</span> -b 2.0.0 https://github.com/ceres-solver/ceres-solver.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/abseil/abseil-cpp.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ethz-asl/libpointmatcher.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ethz-asl/libnabo.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> abseil-cpp</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake ..   -DCMAKE_INSTALL_PREFIX=$(<span class="built_in">pwd</span>)/install   -DCMAKE_CXX_STANDARD=17   -DCMAKE_CXX_STANDARD_REQUIRED=ON   -DCMAKE_CXX_EXTENSIONS=OFF   -DBUILD_SHARED_LIBS=ON   -DBUILD_TESTING=OFF</span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/depend/ceres-solver</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake .. -DBUILD_TESTING=OFF -DBUILD_SHARED_LIBS=ON -DCMAKE_INSTALL_PREFIX=/usr/local</span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /usr/local/lib/pkgconfig</span><br><span class="line"><span class="built_in">sudo</span> vim /usr/local/lib/pkgconfig/ceres-solver.pc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在其中黏贴以下内容：</span></span><br><span class="line"><span class="comment"># -------------------- 我是分割线 --------------------</span></span><br><span class="line">prefix=/usr/local</span><br><span class="line">exec_prefix=<span class="variable">$&#123;prefix&#125;</span></span><br><span class="line">libdir=<span class="variable">$&#123;exec_prefix&#125;</span>/lib</span><br><span class="line">includedir=<span class="variable">$&#123;prefix&#125;</span>/include</span><br><span class="line"></span><br><span class="line">Name: ceres-solver</span><br><span class="line">Description: A non-linear least squares minimizer</span><br><span class="line">Version: 2.0.0</span><br><span class="line">Libs: -L<span class="variable">$&#123;libdir&#125;</span> -lceres</span><br><span class="line">Cflags: -I<span class="variable">$&#123;includedir&#125;</span></span><br><span class="line"><span class="comment"># -------------------- 我是分割线 --------------------</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export CMAKE_PREFIX_PATH=/usr/local:$CMAKE_PREFIX_PATH&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">pkg-config --modversion ceres-solver</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/depend/libnabo</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local</span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/depend/libpointmatcher</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local</span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新进行依赖安装</span></span><br><span class="line"><span class="built_in">cd</span> ~/px4_ws</span><br><span class="line">rosdepc update &amp;&amp; rosdepc install --from-paths src --ignore-src -r -y</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/ayaa.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/ayaa.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Aya</div><div class="post-copyright__author_desc">生活中总是充斥着失败，而多次相似的失败终会形成PTSD。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/')">PX4开发之旅</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=PX4开发之旅&amp;url=http://ayasowen.github.io/2024/11/27/PX4%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85/&amp;pic=/img/px4.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://AyasOwen.github.io" target="_blank">Aya</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/px4/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>px4<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/ros2/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ros2<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/ayaa.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/11/20/%E4%BA%8E-orangepi5-plus-%E4%B8%8A%E9%83%A8%E7%BD%B2-ros1/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/9.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">于 orangepi5 plus 上部署 ros1</div></div></a></div><div class="next-post pull-right"><a href="/2024/11/27/%E4%BA%8E-orangepi5-plus-%E4%B8%8A%E9%83%A8%E7%BD%B2-ros2/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/9.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">于 orangepi5 plus 上部署 ros2</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/05/20/PX4%E4%BB%BF%E7%9C%9F%E6%96%B9%E6%A1%88/" title="PX4仿真方案"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-20</div><div class="title">PX4仿真方案</div></div></a></div><div><a href="/2025/05/15/PX4%E9%A3%9E%E6%8E%A7%E8%B0%83%E8%AF%95%E6%96%B9%E6%A1%88/" title="PX4飞控调试方案"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/px4.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-15</div><div class="title">PX4飞控调试方案</div></div></a></div><div><a href="/2025/03/08/Realsense%20%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/" title="Realsense 相机的疑难杂症"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Aya.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-08</div><div class="title">Realsense 相机的疑难杂症</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/ayaa.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">一些关于<b style="color:#fff">无人机、学科知识</b>相关的问题和看法。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">瓦罗兰特真好玩。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="https://ayasowen.github.io/"><h1 class="author-info__name">Aya</h1><div class="author-info__desc">生活中总是充斥着失败，而多次相似的失败终会形成PTSD。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/AyasOwen/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">哈利路大旋风~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PX4-%E4%B8%8A%E4%BD%8D%E6%9C%BA%E5%BC%80%E5%8F%91"><span class="toc-number">1.</span> <span class="toc-text">PX4 上位机开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-conda"><span class="toc-number">1.1.</span> <span class="toc-text">安装 conda</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%B9%B6%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.1.</span> <span class="toc-text">创建环境并启动环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-OpenCv"><span class="toc-number">1.1.2.</span> <span class="toc-text">安装 OpenCv</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">git 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91"><span class="toc-number">1.2.1.</span> <span class="toc-text">科学上网</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-ros2"><span class="toc-number">1.3.</span> <span class="toc-text">安装 ros2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-mavros2-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">安装 mavros2 功能包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-t265-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.2.</span> <span class="toc-text">安装 t265 功能包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Offboard-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.3.</span> <span class="toc-text">安装 Offboard 功能包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-rplidar-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.4.</span> <span class="toc-text">安装 rplidar 功能包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SLAM-%E5%BB%BA%E5%9B%BE%EF%BC%88T265-D435-%E6%BF%80%E5%85%89%E9%9B%B7%E8%BE%BE%EF%BC%89"><span class="toc-number">1.3.5.</span> <span class="toc-text">SLAM 建图（T265 D435 激光雷达）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-nav2-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">安装 nav2 功能包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-imu-tools"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">安装 imu_tools</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-slam-toolbox"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">安装 slam_toolbox</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-rtabmap-%E5%8A%9F%E8%83%BD%E5%8C%85"><span class="toc-number">1.3.5.4.</span> <span class="toc-text">安装 rtabmap 功能包</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/20/PX4%E4%BB%BF%E7%9C%9F%E6%96%B9%E6%A1%88/" title="PX4仿真方案">PX4仿真方案</a><time datetime="2025-05-20T06:35:06.000Z" title="发表于 2025-05-20 14:35:06">2025-05-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/15/PX4%E9%A3%9E%E6%8E%A7%E8%B0%83%E8%AF%95%E6%96%B9%E6%A1%88/" title="PX4飞控调试方案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/px4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PX4飞控调试方案"/></a><div class="content"><a class="title" href="/2025/05/15/PX4%E9%A3%9E%E6%8E%A7%E8%B0%83%E8%AF%95%E6%96%B9%E6%A1%88/" title="PX4飞控调试方案">PX4飞控调试方案</a><time datetime="2025-05-15T08:42:07.000Z" title="发表于 2025-05-15 16:42:07">2025-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/09/%E4%BA%8E-orangepi5-plus-%E4%B8%8A%E5%90%AF%E7%94%A8%E5%A4%96%E8%AE%BE%E5%BC%95%E8%84%9A/" title="于 orangepi5 plus 上启用外设引脚"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/orangepi/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="于 orangepi5 plus 上启用外设引脚"/></a><div class="content"><a class="title" href="/2025/03/09/%E4%BA%8E-orangepi5-plus-%E4%B8%8A%E5%90%AF%E7%94%A8%E5%A4%96%E8%AE%BE%E5%BC%95%E8%84%9A/" title="于 orangepi5 plus 上启用外设引脚">于 orangepi5 plus 上启用外设引脚</a><time datetime="2025-03-09T05:25:31.000Z" title="发表于 2025-03-09 13:25:31">2025-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/08/Realsense%20%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/" title="Realsense 相机的疑难杂症"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Aya.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Realsense 相机的疑难杂症"/></a><div class="content"><a class="title" href="/2025/03/08/Realsense%20%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/" title="Realsense 相机的疑难杂症">Realsense 相机的疑难杂症</a><time datetime="2025-03-08T11:30:17.000Z" title="发表于 2025-03-08 19:30:17">2025-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/25/stm32%E4%B9%8BHAL%E5%BA%93%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89/" title="stm32之HAL库开发（二）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/stm32/title.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="stm32之HAL库开发（二）"/></a><div class="content"><a class="title" href="/2025/01/25/stm32%E4%B9%8BHAL%E5%BA%93%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89/" title="stm32之HAL库开发（二）">stm32之HAL库开发（二）</a><time datetime="2025-01-25T07:54:03.000Z" title="发表于 2025-01-25 15:54:03">2025-01-25</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="Aya" target="_blank">Aya</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">2</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12894421871&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HAL/" style="font-size: 0.88rem;">HAL<sup>2</sup></a><a href="/tags/acfly/" style="font-size: 0.88rem;">acfly<sup>2</sup></a><a href="/tags/jetson/" style="font-size: 0.88rem;">jetson<sup>1</sup></a><a href="/tags/orangepi/" style="font-size: 0.88rem;">orangepi<sup>1</sup></a><a href="/tags/px4/" style="font-size: 0.88rem;">px4<sup>3</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>1</sup></a><a href="/tags/ros/" style="font-size: 0.88rem;">ros<sup>5</sup></a><a href="/tags/ros2/" style="font-size: 0.88rem;">ros2<sup>3</sup></a><a href="/tags/stm32/" style="font-size: 0.88rem;">stm32<sup>2</sup></a><a href="/tags/uart/" style="font-size: 0.88rem;">uart<sup>1</sup></a><a href="/tags/%E4%BB%BF%E7%9C%9F/" style="font-size: 0.88rem;">仿真<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="12894421871" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.2"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=12894421871&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("17/11/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Aya 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>